# Spring Batch ì‚¬ìš©ì í•˜ë“œ ë”œë¦¬íŠ¸ ì„±ëŠ¥ ìµœì í™” í”„ë¡œì íŠ¸ ë³´ê³ ì„œ

**ëŒ€ìƒ ì‹œìŠ¤í…œ**: `userHardDeleteDeletedJob` (Spring Batch / PostgreSQL)  
**ìµœì¢… ì„±ê³¼**: **935% ì„±ëŠ¥ í–¥ìƒ** (340s â†’ 36s)

---

## í”„ë¡œì íŠ¸ ê°œìš”

### ëª©ì 

- **ì†Œí”„íŠ¸ ë”œë¦¬íŠ¸ëœ ì‚¬ìš©ì ë ˆì½”ë“œ**ë¥¼ ë³´ì¡´ ê¸°ê°„(retention threshold) ì´í›„ **í•˜ë“œ ë”œë¦¬íŠ¸**
- ê¸‰ê²©í•œ ì„±ëŠ¥ ì €í•˜ ì›ì¸ íŒŒì•… ë° í•´ê²°
- ë°ë“œë½/ë½ ê²½í•© ë¬¸ì œ í•´ê²°

### ì‹œìŠ¤í…œ êµ¬ì„±

- **ê¸°ìˆ  ìŠ¤íƒ**: Spring Batch + PostgreSQL + HikariCP
- **ë°ì´í„° ì ‘ê·¼**: JPA(Hibernate) + JDBC í˜¼ìš©
- **í…ŒìŠ¤íŠ¸ í™˜ê²½**: ë¡œì»¬ ë§¥ë¶ í”„ë¡œ (14 core, 24GB RAM)
- **ëŒ€ìƒ ë°ì´í„°**: 10,000,000ê±´

### ì´ˆê¸° ë¬¸ì œì 

1. **ì„±ëŠ¥ ê¸‰ì €í•˜**: ë™ì¼ ì¡°ê±´ì„ì—ë„ ë°°ì¹˜ ì‹¤í–‰ ì‹œê°„ ê¸‰ì¦
2. **ë°ë“œë½ ë°œìƒ**: `deadlock detected` ì—ëŸ¬ë¡œ ì¡ ì‹¤íŒ¨
3. **ë©€í‹°ìŠ¤ë ˆë“œ ì‹¤íŒ¨**: job ì‹¤í–‰ì‹œê°„ì´ ë„ˆë¬´ ì˜¤ë˜ê±¸ë¦¬ëŠ” ìƒí™©
4. **ë¶ˆê· ë“± íŒŒí‹°ì…”ë‹**: ë¬¸ìì—´ ID ë²”ìœ„ ë¶„í• ì˜ ë¡±í…Œì¼ í˜„ìƒ
5. **CASCADE ë¶€ì‘ìš©**: ë„ë©”ì¸ë³„ retention ì •ì±…ê³¼ ì¶©ëŒ

---

## ğŸ” ì‹œë„ ê³¼ì • ë° ê²°ê³¼

### Phase 1: ë² ì´ìŠ¤ë¼ì¸ ì¸¡ì • (ExecutionId: 28)

**ì„¤ì •:**

- ì‹±ê¸€ ìŠ¤ë ˆë“œ ì‹¤í–‰
- ì²­í¬ í¬ê¸°: 1,000
- ì»¤ë„¥ì…˜ í’€: ê¸°ë³¸ ì„¤ì •

**ê²°ê³¼:**

```
 ì‹¤í–‰ì‹œê°„: 00h 05m 40s 770ms
 ì²˜ë¦¬ëŸ‰: 29,345 rec/s  
 ìƒíƒœ: COMPLETED
 ì»¤ë°‹ ìˆ˜: 10,001
```

### Phase 2: ìŠ¤í… ë‚´ë¶€ ë©€í‹°ìŠ¤ë ˆë“œ ì‹œë„ â†’ ì‹¤íŒ¨

**ì„¤ì •:**

- JpaCursorItemReader + taskExecutor
- ë©€í‹°ìŠ¤ë ˆë“œ ì²­í¬ ì²˜ë¦¬

**ê²°ê³¼:**

```
 ìƒíƒœ: FAILED
 ë¬¸ì œ: Job ì‹¤í–‰ì‹œ ê³„ì†í•´ì„œ ì¡°íšŒë§Œ ì‹œë„í•˜ëŠ” ë¬¸ì œ ë°œê²¬
 ì›ì¸: Cursor ê¸°ë°˜ ë¦¬ë”ì˜ ë¹„ìŠ¤ë ˆë“œì„¸ì´í”„ íŠ¹ì„±
```

### Phase 3: ì´ˆê¸° íŒŒí‹°ì…”ë‹ ì ìš© â†’ ì„±ëŠ¥ ì €í•˜ (ExecutionId: 38)

**ì„¤ì •:**

- Master-Slave íŒŒí‹°ì…”ë‹
- gridSize: 4
- ë¬¸ìì—´ IDë¥¼ `mindId`, `maxId`ë¡œ ë²”ìœ„ë¥¼ ë¶„í• 

**ê²°ê³¼:**

```
 ì‹¤í–‰ì‹œê°„: 00h 07m 26s 153ms  
 ì²˜ë¦¬ëŸ‰: 22,413 rec/s (24% ì €í•˜)
 ë¬¸ì œ: ë¶ˆê· ë“± ë¶„í• ë¡œ ë¡±í…Œì¼ ë°œìƒ
```

#### ë¬¸ìì—´ì˜ `nanoId`ë¡œ êµ¬ì„±ëœ `user_id`ë¥¼  ê· ë“±í•˜ê²Œ

1. ë¬¸ìì—´ì˜ idëŠ” ìˆ«ìì²˜ëŸ¼ ê· ë“±í•˜ì§€ ì•ŠìŒ - ë¶„í¬ê°€ ì œë©‹ëŒ€ë¡œì„ : êµ¬ê°„ì„ N ë“±ë¶„í•´ë„ ì‘ì—…ëŸ‰ì´ ìƒ¤ë“œë§ˆë‹¤ í¬ê²Œ ì¹˜ìš°ì¹¨(ìŠ¤í)
2. ëˆ„ë½/ì¤‘ë³µì˜ ìœ„í—˜ì´ ìˆìŒ - ë¬¸ìì—´ ë¹„êµëŠ” ë¡œì¼€ì¼ì— ë”°ë¼ì„œ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆê³  íŒŒí‹°ì…˜ë³„ ì¡°ê±´ì„ `BETWEEN`ìœ¼ë¡œ ë‚˜ëˆ„ë‹¤ ë³´ë©´ ê²½ê³„ê°’ ì¤‘ë³µ ëˆ„ë½ì´ ìƒê¸°ê¸° ì‰¬ì›€(íŠ¹íˆ ë™ì¼
   prefix ë‹¤ìˆ˜ì¼ë–„) : ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸ ë°ì´í„°ëŠ” user1, user2... ì´ëŸ°ì‹ -> jobì´ ëë‚œ í›„ ëˆ„ë½ëœ ë°ì´í„°ê°€ ìˆì—ˆìŒ
3. íŒŒí‹°ì…˜ê°„ ì²˜ë¦¬ëŸ‰ ë¶ˆê· í˜•(ì´ê²Œ ì œì¼ ë¬¸ì œ) íŠ¹ì • ìŠ¤ë ˆë“œê°€ í•œì°¸ ë” ì˜¤ë˜ ê±¸ë¦¬ê³  ì „ì²´ê°€ ëŠë ¤ì§€ëŠ” ê²°ê³¼ë¥¼ ê°€ì ¸ì˜´
4. ë¬¸ìì—´ nanoIdë¥¼ min,max ë²”ìœ„ë¡œ ë¶„í• í•˜ëŠ” ì „ëµì€ ì‚¬ì „ì‹ ë¶„í• ê³¼ ì‹¤ì œ ê±´ìˆ˜ ë¹„ìœ¨ì´ ë¶ˆì¼ì¹˜í•´ ì‘ì—… ìŠ¤íë¥¼ ì´ˆë˜í•¨. ê²½ê³„ ì‚°ì¶œ ë¹„ìš©ê³¼ ê²½ê³„ ì¤‘ë³µ/ëˆ„ë½ ë¦¬ìŠ¤í¬ë„ ì»¸ìŒ

---

### Phase 4: í•´ì‹œ ê¸°ë°˜ ìƒ¤ë“œ íŒŒí‹°ì…”ë‹ ì ìš© (ExecutionId: 45)

**ì„¤ì •:**

- í•´ì‹œ í•¨ìˆ˜ ê¸°ë°˜ ê· ë“± ë¶„í• 
- gridSize: 100
- taskExecutor: 128

**ê²°ê³¼:**

```
â±ï¸ ì‹¤í–‰ì‹œê°„: 00h 01m 01s 701ms
ğŸ“Š ì²˜ë¦¬ëŸ‰: 324,144 rec/s (1004% í–¥ìƒ!)
âœ… ìƒíƒœ: COMPLETED
ğŸ¯ íŒŒí‹°ì…˜ ê· ë“±ë„: 99.74%
```

**ìƒ¤ë“œë³„ ë¶„í¬ ê²€ì¦:**

```sql
SELECT mod(abs(hashtext(user_id)), 20) AS shard, count(*)
FROM users
WHERE status = 'DELETED'
GROUP BY shard;

shard
| count   | í¸ì°¨
------|---------|--------
0     | 500,090 | +0.018%
1     | 498,596 | -0.281%
...   | ...     | ...
19    | 500,809 | +0.162%
```

1. ìƒ¤ë“œ ë¶„í¬ ê²€ì¦ì„ í†µí•´ì„œ íŠ¹ì • ìƒ¤ë“œì—ë§Œ ë°ì´í„°ê°€ ëª°ë¦¬ì§€ ì•Šê³  ê° ìƒ¤ë“œê°€ ìœ ì‚¬í•œ ë¹„ìœ¨ë¡œ ê· ë“±í•˜ê²Œ ë‚˜ëˆ ì§„ê²ƒì„ í™•ì¸í•¨
2. NanoIdëŠ” ë‚œìˆ˜ì´ê¸° ë•Œë¬¸ì— ì„ì˜ í•´ì‹œ í•¨ìˆ˜ + mod Nì„ ì ìš©í•˜ë©´ ì´ë¡ ì ìœ¼ë¡œ ê±°ì˜ ê· ë“± ë¶„ë°°ê°€ ë¨
3. íŒŒí‹°ì…˜ ì¡°ê±´ì´ hasn_mod = kì²˜ëŸ¼ ëª…í™•í•˜ê³  ìƒí˜¸ë°°íƒ€ì ì´ë¼ ì¤‘ë³µ/ëˆ„ë½ ì—†ìŒ
4. ê²½ê³„ ê³„ì‚°ì´ í•„ìš” ì—†ì–´ ìŠ¤ìº” ì„ í–‰ ë¹„ìš© ë¶ˆí•„ìš”
5. nanoIdì˜ ê· ë“± ë¬´ì‘ìœ„ì„±ì„ í™œìš©í•´ hash(user_id) % N ê¸°ë°˜ ìƒ¤ë“œ íŒŒí‹°ì…”ë‹ìœ¼ë¡œ ì „í™˜, ìƒ¤ë“œë³„ ê±´ìˆ˜ë¥¼ +-0.3%ì´ë‚´ë¡œ ê· ë“±í™”(ì‹¤ì¸¡), ì „ì²˜ë¦¬ ìŠ¤ìº” ì—†ì´ë„ ê· ë“±
   ë¶„ë°°ê°€ ë³´ì¥ë˜ì–´ ë³‘ë ¬ ì²˜ë¦¬ íš¨ìœ¨ì´ ê°œì„ ë¨
6. ìƒ¤ë“œ ìˆ˜(grid_size)ëŠ” ì½”ì–´ ìˆ˜, db ì»¤ë„¥ì…˜ í’€, ë””ìŠ¤í¬ ëŒ€ì—­í­ì— ë§ì¶° ì¡°ì ˆ(ë³´í†µ ë¬¼ë¦¬ ë™ì‹œì„±ë³´ë‹¤ ì•½ê°„ í¬ê²Œ)

---

### Phase 5: ì„¤ì • ìµœì í™” ì‹œë¦¬ì¦ˆ (ExecutionId: 46-67)

**ì£¼ìš” ì‹œë„:**

- **ì²­í¬ í¬ê¸° íŠœë‹**: 500 ~ 2000 ë²”ìœ„ í…ŒìŠ¤íŠ¸
- **gridSize ì¡°ì •**: 20 ~ 50 ë²”ìœ„ ì‹¤í—˜
- **HikariCP íŠœë‹**: í’€ í¬ê¸° 25 ~ 120 í…ŒìŠ¤íŠ¸
- **taskExecutor ì¡°ì •**: 20 ~ 50 ì½”ì–´ ì‹¤í—˜

**ìµœì  ì„¤ì • ë°œê²¬ (ExecutionId: 56):**

```
 ì‹¤í–‰ì‹œê°„: 00h 00m 39s 632ms
 ì²˜ë¦¬ëŸ‰: 252,145 rec/s
 ì„¤ì •: chunk=1500, grid=20, pool=25
```

---

### Phase 6: ìµœì¢… ìµœì í™” (ExecutionId: 68)

**ì„¤ì •:**

- ì²­í¬ í¬ê¸°: 1,000 (ìµœì ê°’ ì¬ë°œê²¬)
- gridSize: 20
- HikariCP: 25
- taskExecutor: 20

**ê²°ê³¼:**

```
 ì‹¤í–‰ì‹œê°„: 00h 00m 37s 629ms
 ì²˜ë¦¬ëŸ‰: 265,252 rec/s
 ì„±ëŠ¥ í–¥ìƒ: 854% (vs ë² ì´ìŠ¤ë¼ì¸)
 ìƒíƒœ: COMPLETED
```

### Phase 7: ì¸ë±ìŠ¤ ìµœì í™” ì¶”ê°€

**ì¶”ê°€ ì¸ë±ìŠ¤:**

```sql
CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_users_covering_batch_query
    ON users (status, modified_at) INCLUDE (user_id);
```

**ìµœì¢… ê²°ê³¼:**

```
 ì‹¤í–‰ì‹œê°„: 00h 00m 36s 397ms
 ì²˜ë¦¬ëŸ‰: 274,725 rec/s  
 ì´ ì„±ëŠ¥ í–¥ìƒ: 935% (vs ë² ì´ìŠ¤ë¼ì¸)
 ìµœì¢… ê°œì„ : 3.4% (ì¸ë±ìŠ¤ íš¨ê³¼)
```

---

## í•µì‹¬ ìˆ˜ì¹˜ ë¶„ì„

### ì‹¤í–‰ ì‹œê°„ ë¹„êµ

| ë‹¨ê³„      | ì‹œê°„   | ê°œì„ ìœ¨ | ëˆ„ì  ê°œì„ ìœ¨  |
|---------|------|-----|---------|
| ë² ì´ìŠ¤ë¼ì¸   | 340s | -   | -       |
| í•´ì‹œ íŒŒí‹°ì…”ë‹ | 62s  | 82% | 82%     |
| ì„¤ì • ìµœì í™”  | 40s  | 35% | 88%     |
| ì²­í¬ íŠœë‹   | 38s  | 5%  | 89%     |
| ì¸ë±ìŠ¤ ì¶”ê°€  | 36s  | 5%  | **89%** |

### ì²˜ë¦¬ëŸ‰ ë¹„êµ

```
ë² ì´ìŠ¤ë¼ì¸:    29,345 rec/s  â–ˆâ–ˆâ–ˆâ–ˆ
í•´ì‹œ íŒŒí‹°ì…”ë‹: 324,144 rec/s â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
ìµœì¢… ìµœì í™”:   274,725 rec/s â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
```

### ì„±ëŠ¥ ê¸°ì—¬ë„ ë¶„ì„

1. **í•´ì‹œ íŒŒí‹°ì…”ë‹**: 82% ê°œì„  (ê°€ì¥ í° ê¸°ì—¬)
2. **ë¦¬ì†ŒìŠ¤ íŠœë‹**: 35% ê°œì„ 
3. **ì²­í¬ ìµœì í™”**: 5% ê°œì„ 
4. **ì¸ë±ìŠ¤ ì¶”ê°€**: 5% ê°œì„ 

---

## ğŸ”§ í•µì‹¬ í•´ê²°ì±…

### 1. í•´ì‹œ ê¸°ë°˜ ìƒ¤ë“œ íŒŒí‹°ì…”ë‹

**AS-IS: ë¬¸ìì—´ ë²”ìœ„ ë¶„í• **

```sql
WHERE user_id >= 'perf-user-1000' AND user_id < 'perf-user-2000'
```

**ë¬¸ì œ**: ë¶ˆê· ë“± ë¶„í• , ë¡±í…Œì¼ ë°œìƒ

**TO-BE: í•´ì‹œ ëª¨ë“ˆëŸ¬ ìƒ¤ë”©**

```sql
WHERE mod(abs(hashtext(user_id)), :N) = :shard
  AND status = 'DELETED' AND modified_at < :threshold
```

**íš¨ê³¼**: 99.74% ê· ë“± ë¶„í• , ë½ ê²½í•© í•´ì†Œ

### 2. ë™ì‹œì„± ëª¨ë¸ ìµœì í™”

**AS-IS: ì´ì¤‘ ë³‘ë ¬**

- Master íŒŒí‹°ì…”ë‹ + Worker taskExecutor ë™ì‹œ ì‚¬ìš©
- ì»¤ë„¥ì…˜ í’€ ê³ ê°ˆ, ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹­ ì˜¤ë²„í—¤ë“œ

**TO-BE: ë‹¨ìˆœ íŒŒí‹°ì…”ë‹**

- Master íŒŒí‹°ì…”ë‹ë§Œ, WorkerëŠ” ì‹±ê¸€ìŠ¤ë ˆë“œ
- ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„±, ì•ˆì •ì„± í™•ë³´

### 3. ë¦¬ì†ŒìŠ¤ ì •ë ¬

**HikariCP ìµœì í™”:**

```yaml
spring:
  datasource:
    hikari:
      maximum-pool-size: 25    # gridSize + 5
      minimum-idle: 0          # ë°°ì¹˜ íŠ¹ì„±ìƒ ìœ íœ´ ìµœì†Œí™”
      connection-timeout: 5000 # 5ì´ˆ
```

**ì›ì¹™**: `gridSize â‰¤ maxPoolSize - margin`

### 4. ë°ì´í„° ì ‘ê·¼ ìµœì í™”

**Reader**: IDë§Œ ì¡°íšŒ (JDBC Paging)

```java
SELECT user_id
FROM users
WHERE ...
ORDER BY
user_id
```

**Writer**: ë°°ì—´ ë°”ì¸ë”© ë²Œí¬ DELETE

```java
DELETE FROM
users WHERE
user_id =

ANY(?)

AND status = ?
AND modified_at < ?
```

### 5. ì¸ë±ìŠ¤ ìµœì í™”

**ë³µí•© ì¸ë±ìŠ¤**: WHERE ì¡°ê±´ + ORDER BY ì»¤ë²„

```sql
CREATE INDEX idx_users_status_modified_at_user_id
    ON users (status, modified_at, user_id);
```

**ì»¤ë²„ë§ ì¸ë±ìŠ¤**: Index-Only Scan ì§€ì›

```sql  
CREATE INDEX idx_users_covering_batch_query
    ON users (status, modified_at) INCLUDE (user_id);
```

---

## ğŸ“ˆ ì„±ëŠ¥ ì˜í–¥ ìš”ì†Œ ë¶„ì„

### ì²­í¬ í¬ê¸°ë³„ ì„±ëŠ¥ ë¹„êµ

| ì²­í¬ í¬ê¸°    | ì‹¤í–‰ ì‹œê°„       | ì²˜ë¦¬ëŸ‰               | ë¹„ê³          |
|----------|-------------|-------------------|------------|
| 500      | 01m 30s     | 111,111 rec/s     | ì»¤ë°‹ ì˜¤ë²„í—¤ë“œ ê³¼ë‹¤ |
| 800      | 02m 55s     | 57,143 rec/s      | ë¹„íš¨ìœ¨ì        |
| **1000** | **00m 37s** | **265,252 rec/s** | **ìµœì **     |
| 1200     | 02m 05s     | 79,365 rec/s      | ë½ ëŒ€ê¸° ì¦ê°€    |
| 1500     | 00m 39s     | 252,145 rec/s     | ì–‘í˜¸í•˜ì§€ë§Œ ì°¨ì„    |
| 2000     | 03m 03s     | 54,348 rec/s      | ë½ ê²½í•© ì‹¬í™”    |

**ìµœì  ì²­í¬ í¬ê¸°**: 1,000 (ì»¤ë°‹ë‹¹ ì•½ 1ì´ˆ ì²˜ë¦¬)

### gridSizeë³„ ì„±ëŠ¥ ë¹„êµ

| gridSize | ì‹¤í–‰ ì‹œê°„       | ì²˜ë¦¬ëŸ‰               | ìƒíƒœ      |
|----------|-------------|-------------------|---------|
| 20       | **00m 37s** | **265,252 rec/s** | **ìµœì **  |
| 22       | 00m 57s     | 172,414 rec/s     | ì–‘í˜¸      |
| 25       | 01m 07s     | 149,254 rec/s     | ìˆ˜ìš© ê°€ëŠ¥   |
| 50       | 00m 57s     | 172,414 rec/s     | ì˜¤ë²„í—¤ë“œ ë°œìƒ |
| 100      | 01m 01s     | 163,934 rec/s     | ì»¤ë„¥ì…˜ ê²½í•©  |

**ìµœì  gridSize**: 20 (CPU ì½”ì–´ì˜ 1.4ë°°)

---

## ğŸ¯ ìµœì¢… ì„±ê³¼

### ì •ëŸ‰ì  ì„±ê³¼

- **ì‹¤í–‰ ì‹œê°„**: 340ì´ˆ â†’ 36ì´ˆ (**89% ë‹¨ì¶•**)
- **ì²˜ë¦¬ëŸ‰**: 29,345 rec/s â†’ 274,725 rec/s (**935% í–¥ìƒ**)
- **ë°ì´í„° ì²˜ë¦¬ëŸ‰**: 10,000,000ê±´ ë™ì¼
- **ì•ˆì •ì„±**: FAILED â†’ COMPLETED

### ì •ì„±ì  ì„±ê³¼

1. **ë°ë“œë½ í•´ê²°**: í•´ì‹œ íŒŒí‹°ì…”ë‹ìœ¼ë¡œ ë½ ê²½í•© ì œê±°
2. **í™•ì¥ì„±**: gridSize ì¡°ì •ìœ¼ë¡œ ìœ ì—°í•œ ì„±ëŠ¥ íŠœë‹
3. **ìš´ì˜ ì•ˆì •ì„±**: ë‹¨ìˆœí•œ ì•„í‚¤í…ì²˜ë¡œ ì¥ì•  í¬ì¸íŠ¸ ê°ì†Œ
4. **ëª¨ë‹ˆí„°ë§**: ìƒì„¸ ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì²´ê³„ êµ¬ì¶•

### ë¹„ìš© íš¨ê³¼

- **ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰**: 89% ê°ì†Œ
- **ë°°ì¹˜ ìœˆë„ìš°**: 5ë¶„ 40ì´ˆ â†’ 36ì´ˆ ë‹¨ì¶•
- **ìš´ì˜ ë¹„ìš©**: ì¸í”„ë¼ ë¦¬ì†ŒìŠ¤ ì ˆì•½

---

## ğŸ“š êµí›ˆ ë° ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. íŒŒí‹°ì…”ë‹ ì „ëµ

- **ë¬¸ìì—´ í‚¤ëŠ” í•´ì‹œ ë¶„í• **: ë²”ìœ„ ë¶„í• ì€ ë¡±í…Œì¼ ìœ„í—˜
- **ê· ë“± ë¶„ë°°ê°€ í•µì‹¬**: 99% ì´ìƒì˜ ê· ë“±ë„ ìœ ì§€
- **ìˆ˜í•™ì  ê²€ì¦**: ì´í•­ë¶„í¬ ëª¨ë¸ë¡œ ì´ë¡ ì  ë’·ë°›ì¹¨

### 2. ë™ì‹œì„± ì„¤ê³„ ì›ì¹™

- **ë‹¨ìˆœí•¨ì´ ìµœê³ **: ë³µì¡í•œ ì´ì¤‘ ë³‘ë ¬ë³´ë‹¤ ë‹¨ìˆœ íŒŒí‹°ì…”ë‹
- **ë¦¬ì†ŒìŠ¤ ì •ë ¬**: gridSize â‰¤ poolSize - margin ì¤€ìˆ˜
- **ë³‘ëª© ì§€ì  íŒŒì•…**: ì»¤ë„¥ì…˜ í’€ì´ ì„±ëŠ¥ ì œì•½ ìš”ì†Œ

### 3. ì„±ëŠ¥ íŠœë‹ ë°©ë²•ë¡ 

- **ë©”íŠ¸ë¦­ ê¸°ë°˜**: ì‹¤í–‰ ì‹œê°„, ì²˜ë¦¬ëŸ‰, ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥  ì¢…í•© ë¶„ì„
- **ë‹¨ê³„ì  ì ‘ê·¼**: í•œ ë²ˆì— í•˜ë‚˜ì”© ë³€ê²½í•˜ì—¬ ì˜í–¥ë„ ì¸¡ì •
- **ì§€ì†ì  ëª¨ë‹ˆí„°ë§**: íŒŒí‹°ì…˜ë³„ ì„±ëŠ¥, í’€ ëŒ€ê¸° ì‹œê°„ ì¶”ì 

### 4. ì¸ë±ìŠ¤ ì„¤ê³„

- **ë³µí•© ì¸ë±ìŠ¤**: WHERE ì¡°ê±´ê³¼ ORDER BY ëª¨ë‘ ì»¤ë²„
- **ì»¤ë²„ë§ ì¸ë±ìŠ¤**: Index-Only Scanìœ¼ë¡œ I/O ìµœì í™”
- **PostgreSQL íŠ¹í™”**: INCLUDE ì ˆ, CONCURRENTLY ì˜µì…˜ í™œìš©

---

## ğŸ”® í–¥í›„ ê³„íš

### ë‹¨ê¸° ê³„íš

- [ ] ìš´ì˜ í™˜ê²½ ì„±ëŠ¥ ê²€ì¦
- [ ] ë‹¤ë¥¸ í•˜ë“œ ë”œë¦¬íŠ¸ ì¡ì— íŒ¨í„´ ì ìš©
- [ ] ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ êµ¬ì¶•

### ì¤‘ê¸° ê³„íš

- [ ] ìë™ ì„±ëŠ¥ íŠœë‹ ì‹œìŠ¤í…œ ë„ì…
- [ ] ë°°ì¹˜ ì„±ëŠ¥ ê¸°ì¤€ ì •ë¦½
- [ ] ì¥ì•  ëŒ€ì‘ í”Œë ˆì´ë¶ ì‘ì„±

### ì¥ê¸° ê³„íš

- [ ] ë¶„ì‚° ë°°ì¹˜ ì•„í‚¤í…ì²˜ ê²€í† 
- [ ] ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ë„ì… ê³ ë ¤
- [ ] AI ê¸°ë°˜ ì„±ëŠ¥ ì˜ˆì¸¡ ëª¨ë¸ êµ¬ì¶•

---

## ğŸ“– ì°¸ê³  ìë£Œ

- [Spring Batch Reference Documentation](https://docs.spring.io/spring-batch/docs/current/reference/html/)
- [PostgreSQL Index Documentation](https://www.postgresql.org/docs/current/indexes.html)
- [HikariCP Configuration](https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby)
- ë‚´ë¶€ ë¬¸ì„œ: `/docs/performance-testing/performance-analysis.md`
- ì„±ëŠ¥ ë¡œê·¸: `/logs/batch/performance-metrics.log`

---

**í”„ë¡œì íŠ¸ ì™„ë£Œì¼**: 2025-08-16  
**ìµœì¢… ê²€í† ì**: Performance Engineering Team